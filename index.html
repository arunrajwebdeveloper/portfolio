<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arun Raj | Software Developer</title>

    <!-- FONTS -->
    <!-- 400,500,600,700,800,900 -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      body,
      * {
        font-family: "Lexend Deca", sans-serif;
      }
    </style>
    <link rel="stylesheet" href="./styles/index.css" />
    <link rel="stylesheet" href="./styles/responsive.css" />
  </head>
  <body>
    <header class="header">
      <div class="header__content">
        <div class="identity">
          <div class="identity__content">
            <div class="identity__avatar">
              <img
                class="avatar__image"
                src="./images/avatar.jpg"
                loading="lazy"
                alt="arunraj avatar image"
              />
            </div>
            <div class="identity__info">
              <p class="identity__name">arun raj</p>
              <p class="identity__subtext">software developer</p>
            </div>
          </div>
        </div>
      </div>
    </header>
    <section class="main-section">
      <aside class="sidebar sidebar__left d-none">
        <div class="identity">
          <div class="identity__content">
            <div class="identity__avatar">
              <img
                class="avatar__image"
                src="./images/avatar.jpg"
                loading="lazy"
                alt="arunraj avatar image"
              />
            </div>
            <div class="identity__info">
              <p class="identity__name">arun raj</p>
              <p class="identity__subtext">software developer</p>
            </div>
          </div>
        </div>
      </aside>
      <main class="main">
        <div class="canvas">
          <!-- Banner -->
          <article class="article landing">
            <h1 class="main-title">Hey!</h1>
            <p class="sub-text">
              I'm Arun Raj ‚Äî Software Developer from Kerala, building powerful
              web applications with 10+ years of hands-on experience.
            </p>
            <p class="text">
              I'm a passionate software developer with over a decade of
              experience in crafting full-stack web solutions. I specialize in
              building modern, responsive frontends using <mark>React</mark> and
              <mark>Next.js</mark>, and robust backend systems with
              <mark>Node.js, NestJS</mark>, and <mark>Express</mark>. I work
              confidently with <mark>MongoDB</mark> for database management and
              use tools like <mark>React Query</mark> and
              <mark>Redux Toolkit</mark> for efficient state handling. Whether
              it's developing complex APIs, optimizing performance, or
              delivering seamless user experiences ‚Äî I bring clean code, strong
              architecture, and practical problem-solving to every project.
            </p>
          </article>

          <div>
            <label for="voiceSelect">Choose Voice:</label>
            <select id="voiceSelect"></select>
          </div>

          <button id="readBtn" disabled>üîä Read Page</button>
          <button id="stopBtn">‚èπ Stop</button>

          <!-- Skills -->
          <article class="article skills"></article>

          <!-- Experience -->
          <article class="article experience"></article>

          <!-- Works -->
          <article class="article works"></article>

          <!-- Footer -->
          <footer class="footer"></footer>
        </div>
      </main>
      <aside class="sidebar sidebar__right d-none"></aside>
    </section>

    <!-- SCRIPTS -->
    <script>
      let voices = [];
      let speech;

      function isVisible(el) {
        const style = window.getComputedStyle(el);
        return (
          style.display !== "none" &&
          style.visibility !== "hidden" &&
          el.offsetParent !== null
        );
      }

      function populateVoices() {
        voices = speechSynthesis.getVoices();
        const select = document.getElementById("voiceSelect");
        select.innerHTML = "";
        voices.forEach((voice, i) => {
          const option = document.createElement("option");
          option.value = i;
          option.textContent = `${voice.name} (${voice.lang})`;
          select.appendChild(option);
        });

        // Enable the read button only after voices are ready
        document.getElementById("readBtn").disabled = false;
      }

      function readVisibleContent() {
        speechSynthesis.cancel(); // Prevent repeat issue

        let textContent = "";
        document.querySelectorAll("body *").forEach((el) => {
          if (isVisible(el) && el.innerText.trim()) {
            textContent += el.innerText + " ";
          }
        });

        const imageDescriptions = Array.from(document.querySelectorAll("img"))
          .filter((img) => isVisible(img) && img.alt)
          .map((img) => img.alt)
          .join(". ");

        const fullText =
          textContent +
          (imageDescriptions ? ". Images: " + imageDescriptions : "");

        speech = new SpeechSynthesisUtterance(fullText);
        const selectedIndex = document.getElementById("voiceSelect").value;
        if (voices[selectedIndex]) {
          speech.voice = voices[selectedIndex];
          speech.lang = voices[selectedIndex].lang;
        }

        speech.pitch = 1;
        speech.rate = 1;

        speechSynthesis.speak(speech);
      }

      function stopSpeech() {
        speechSynthesis.cancel();
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Sometimes voices are already available
        if (speechSynthesis.getVoices().length !== 0) {
          populateVoices();
        } else {
          // Otherwise, wait for them
          speechSynthesis.onvoiceschanged = populateVoices;
        }

        document
          .getElementById("readBtn")
          .addEventListener("click", readVisibleContent);
        document
          .getElementById("stopBtn")
          .addEventListener("click", stopSpeech);
      });
    </script>

    <!-- <script src="./script/index.js"></script> -->
  </body>
</html>
